<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">
  {%- include head.html -%}
  <body>

    {%- include header.html -%}
    
    {% include baidu-anaylysis.html %}
    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        {{ content }}
      </div>
    </main>

    {%- include statistics.html -%}
    {%- include footer.html -%}

  </body>

<script type="module">
import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';

// Wait for DOM to be ready
document.addEventListener('DOMContentLoaded', async () => {
  // Find all mermaid code blocks
  const mermaidBlocks = document.querySelectorAll('pre code.language-mermaid');

  if (mermaidBlocks.length > 0) {
    // Initialize mermaid
    mermaid.initialize({
      startOnLoad: false,
      theme: 'default'
    });

    // Process each mermaid block
    mermaidBlocks.forEach((block, index) => {
      // Create a div to hold the rendered diagram
      const div = document.createElement('div');
      div.className = 'mermaid';
      div.textContent = block.textContent;

      // Replace the pre/code block with the div
      block.parentElement.replaceWith(div);
    });

    // Render all diagrams
    await mermaid.run();
  }
});
</script>

</html>
